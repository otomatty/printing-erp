'use strict';var chunkVBG7OCWJ_js=require('../chunk-VBG7OCWJ.js');require('../chunk-W5KDAI63.js');var chunkBKBCWEET_js=require('../chunk-BKBCWEET.js');require('../chunk-HYHNM5M6.js');var s=require('react'),reactSlot=require('@radix-ui/react-slot'),zod=require('zod');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var s__default=/*#__PURE__*/_interopDefault(s);var E=s.createContext(null);function B({schema:e,form:t,onSubmit:r,children:i,className:n}){let d=s.useMemo(()=>s__default.default.Children.toArray(i).filter(o=>s__default.default.isValidElement(o)&&o.type===L),[i]),a=s.useMemo(()=>s__default.default.Children.toArray(i).find(o=>s__default.default.isValidElement(o)&&o.type===D),[i]),S=s.useMemo(()=>s__default.default.Children.toArray(i).find(o=>s__default.default.isValidElement(o)&&o.type===V),[i]),x=d.map(o=>o.props.name),p=Z(e,t,x,r);return s__default.default.createElement(E.Provider,{value:p},s__default.default.createElement("form",{onSubmit:t.handleSubmit(r),className:chunkBKBCWEET_js.a(n,"flex size-full flex-col overflow-hidden")},a,s__default.default.createElement("div",{className:"relative transition-transform duration-500"},d.map((o,m)=>{let l=m===p.currentStepIndex;return s__default.default.createElement(O,{key:o.props.name,direction:p.direction,isActive:l,index:m,currentIndex:p.currentStepIndex},o)})),S))}function G(e){let t=k();if(Array.isArray(e.children)){let[r]=e.children;return r(t)}return e.children(t)}var L=function({children:t,asChild:r,...i}){return s__default.default.createElement(r?reactSlot.Slot:"div",{...i},s__default.default.createElement(reactSlot.Slottable,null,t))};function k(){let e=s.useContext(E);if(!e)throw new Error("useMultiStepFormContext must be used within a MultiStepForm");return e}function Z(e,t,r,i){let[n,d]=s.useState({currentStepIndex:0,direction:void 0}),a=s.useCallback(()=>{let u=r[n.currentStepIndex];if(e instanceof zod.z.ZodObject){let c=e.shape[u];if(!c)return  true;let f=t.getValues(u)??{};return c.safeParse(f).success}throw new Error(`Unsupported schema type: ${e.constructor.name}`)},[e,t,r,n.currentStepIndex]),S=s.useCallback(u=>{u.preventDefault();let c=a();if(!c){let f=r[n.currentStepIndex];if(e instanceof zod.z.ZodObject){let C=e.shape[f];if(C){let z=Object.keys(C.shape).map(b=>`${f}.${b}`);for(let b of z)t.trigger(b);return}}}c&&n.currentStepIndex<r.length-1&&d(f=>({...f,direction:"forward",currentStepIndex:f.currentStepIndex+1}));},[a,n.currentStepIndex,r,e,t]),x=s.useCallback(u=>{u.preventDefault(),n.currentStepIndex>0&&d(c=>({...c,direction:"backward",currentStepIndex:c.currentStepIndex-1}));},[n.currentStepIndex]),p=s.useCallback(u=>{u>=0&&u<r.length&&a()&&d(c=>({...c,direction:u>c.currentStepIndex?"forward":"backward",currentStepIndex:u}));},[a,r.length]),o=t.formState.isValid,m=t.formState.errors,l=chunkVBG7OCWJ_js.b({mutationFn:()=>t.handleSubmit(i)()});return s.useMemo(()=>({form:t,currentStep:r[n.currentStepIndex],currentStepIndex:n.currentStepIndex,totalSteps:r.length,isFirstStep:n.currentStepIndex===0,isLastStep:n.currentStepIndex===r.length-1,nextStep:S,prevStep:x,goToStep:p,direction:n.direction,isStepValid:a,isValid:o,errors:m,mutation:l}),[t,l,r,n.currentStepIndex,n.direction,S,x,p,a,o,m])}var D=function({children:t,asChild:r,...i}){return s__default.default.createElement(r?reactSlot.Slot:"div",{...i},s__default.default.createElement(reactSlot.Slottable,null,t))},V=function({children:t,asChild:r,...i}){return s__default.default.createElement(r?reactSlot.Slot:"div",{...i},s__default.default.createElement(reactSlot.Slottable,null,t))};function J(e){return zod.z.object(e)}function O({isActive:e,direction:t,children:r,index:i,currentIndex:n}){let[d,a]=s.useState(e),S=s.useRef(null);if(s.useEffect(()=>{if(e)a(true);else {let l=setTimeout(()=>a(false),300);return ()=>clearTimeout(l)}},[e]),s.useEffect(()=>{if(e&&S.current){let l=S.current.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');l&&l.focus();}},[e]),!d)return null;let x=" top-0 left-0 w-full h-full transition-all duration-300 ease-in-out animate-in fade-in zoom-in-95",p=e?"opacity-100":"opacity-0 absolute",o=chunkBKBCWEET_js.a("translate-x-0",e?{}:{"-translate-x-full":t==="forward"||i<n,"translate-x-full":t==="backward"||i>n}),m=chunkBKBCWEET_js.a(x,p,o);return s__default.default.createElement("div",{ref:S,className:m,"aria-hidden":!e},r)}exports.MultiStepForm=B;exports.MultiStepFormContextProvider=G;exports.MultiStepFormFooter=V;exports.MultiStepFormHeader=D;exports.MultiStepFormStep=L;exports.createStepSchema=J;exports.useMultiStepForm=Z;exports.useMultiStepFormContext=k;//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map