import {b}from'../chunk-4K7VYNPB.mjs';import'../chunk-PUBMDLHF.mjs';import {a}from'../chunk-T5NLFGFR.mjs';import'../chunk-JX3OK2JC.mjs';import s,{createContext,useMemo,useContext,useState,useCallback,useRef,useEffect}from'react';import {Slot,Slottable}from'@radix-ui/react-slot';import {z}from'zod';var E=createContext(null);function B({schema:e,form:t,onSubmit:r,children:i,className:n}){let d=useMemo(()=>s.Children.toArray(i).filter(o=>s.isValidElement(o)&&o.type===L),[i]),a$1=useMemo(()=>s.Children.toArray(i).find(o=>s.isValidElement(o)&&o.type===D),[i]),S=useMemo(()=>s.Children.toArray(i).find(o=>s.isValidElement(o)&&o.type===V),[i]),x=d.map(o=>o.props.name),p=Z(e,t,x,r);return s.createElement(E.Provider,{value:p},s.createElement("form",{onSubmit:t.handleSubmit(r),className:a(n,"flex size-full flex-col overflow-hidden")},a$1,s.createElement("div",{className:"relative transition-transform duration-500"},d.map((o,m)=>{let l=m===p.currentStepIndex;return s.createElement(O,{key:o.props.name,direction:p.direction,isActive:l,index:m,currentIndex:p.currentStepIndex},o)})),S))}function G(e){let t=k();if(Array.isArray(e.children)){let[r]=e.children;return r(t)}return e.children(t)}var L=function({children:t,asChild:r,...i}){return s.createElement(r?Slot:"div",{...i},s.createElement(Slottable,null,t))};function k(){let e=useContext(E);if(!e)throw new Error("useMultiStepFormContext must be used within a MultiStepForm");return e}function Z(e,t,r,i){let[n,d]=useState({currentStepIndex:0,direction:void 0}),a=useCallback(()=>{let u=r[n.currentStepIndex];if(e instanceof z.ZodObject){let c=e.shape[u];if(!c)return  true;let f=t.getValues(u)??{};return c.safeParse(f).success}throw new Error(`Unsupported schema type: ${e.constructor.name}`)},[e,t,r,n.currentStepIndex]),S=useCallback(u=>{u.preventDefault();let c=a();if(!c){let f=r[n.currentStepIndex];if(e instanceof z.ZodObject){let C=e.shape[f];if(C){let z=Object.keys(C.shape).map(b=>`${f}.${b}`);for(let b of z)t.trigger(b);return}}}c&&n.currentStepIndex<r.length-1&&d(f=>({...f,direction:"forward",currentStepIndex:f.currentStepIndex+1}));},[a,n.currentStepIndex,r,e,t]),x=useCallback(u=>{u.preventDefault(),n.currentStepIndex>0&&d(c=>({...c,direction:"backward",currentStepIndex:c.currentStepIndex-1}));},[n.currentStepIndex]),p=useCallback(u=>{u>=0&&u<r.length&&a()&&d(c=>({...c,direction:u>c.currentStepIndex?"forward":"backward",currentStepIndex:u}));},[a,r.length]),o=t.formState.isValid,m=t.formState.errors,l=b({mutationFn:()=>t.handleSubmit(i)()});return useMemo(()=>({form:t,currentStep:r[n.currentStepIndex],currentStepIndex:n.currentStepIndex,totalSteps:r.length,isFirstStep:n.currentStepIndex===0,isLastStep:n.currentStepIndex===r.length-1,nextStep:S,prevStep:x,goToStep:p,direction:n.direction,isStepValid:a,isValid:o,errors:m,mutation:l}),[t,l,r,n.currentStepIndex,n.direction,S,x,p,a,o,m])}var D=function({children:t,asChild:r,...i}){return s.createElement(r?Slot:"div",{...i},s.createElement(Slottable,null,t))},V=function({children:t,asChild:r,...i}){return s.createElement(r?Slot:"div",{...i},s.createElement(Slottable,null,t))};function J(e){return z.object(e)}function O({isActive:e,direction:t,children:r,index:i,currentIndex:n}){let[d,a$1]=useState(e),S=useRef(null);if(useEffect(()=>{if(e)a$1(true);else {let l=setTimeout(()=>a$1(false),300);return ()=>clearTimeout(l)}},[e]),useEffect(()=>{if(e&&S.current){let l=S.current.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');l&&l.focus();}},[e]),!d)return null;let x=" top-0 left-0 w-full h-full transition-all duration-300 ease-in-out animate-in fade-in zoom-in-95",p=e?"opacity-100":"opacity-0 absolute",o=a("translate-x-0",e?{}:{"-translate-x-full":t==="forward"||i<n,"translate-x-full":t==="backward"||i>n}),m=a(x,p,o);return s.createElement("div",{ref:S,className:m,"aria-hidden":!e},r)}export{B as MultiStepForm,G as MultiStepFormContextProvider,V as MultiStepFormFooter,D as MultiStepFormHeader,L as MultiStepFormStep,J as createStepSchema,Z as useMultiStepForm,k as useMultiStepFormContext};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map