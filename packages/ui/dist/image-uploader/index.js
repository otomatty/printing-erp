'use strict';var chunkEKW5ROZ4_js=require('../chunk-EKW5ROZ4.js'),chunkSA4EMREX_js=require('../chunk-SA4EMREX.js'),chunkEVOK3DU6_js=require('../chunk-EVOK3DU6.js');require('../chunk-W5KDAI63.js');var chunkBKBCWEET_js=require('../chunk-BKBCWEET.js');require('../chunk-HYHNM5M6.js');var v=require('react'),lucideReact=require('lucide-react'),reactHookForm=require('react-hook-form'),z=require('next/image'),R=require('@radix-ui/react-label'),classVarianceAuthority=require('class-variance-authority');function _interopDefault(e){return e&&e.__esModule?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}});}})}n.default=e;return Object.freeze(n)}var v__namespace=/*#__PURE__*/_interopNamespace(v);var z__default=/*#__PURE__*/_interopDefault(z);var R__namespace=/*#__PURE__*/_interopNamespace(R);var T=classVarianceAuthority.cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=v__namespace.forwardRef(({className:e,...o},t)=>v__namespace.createElement(R__namespace.Root,{ref:t,className:chunkBKBCWEET_js.a(T(),e),...o}));d.displayName=R__namespace.Root.displayName;var I=22,V=function({children:o,image:t,onClear:r,onInput:m,onValueChange:c,ref:u,visible:N=true,...l}){let s=v.useRef(null),[a,x]=v.useState({image:t,fileName:""}),y=v.useCallback(i=>{i.preventDefault();let C=i.currentTarget.files;if(C?.length){let g=C[0];if(!g)return;let E=URL.createObjectURL(g);x({image:E,fileName:g.name}),c&&c({image:E,file:g});}m&&m(i);},[m,c]),p=v.useCallback(()=>{x({image:"",fileName:""}),s.current&&(s.current.value=""),r&&r();},[r]),w=v.useCallback(i=>{i.preventDefault(),p();},[p]),L=v.useCallback(i=>{s.current=i,typeof u=="function"&&u(s.current);},[u]);v.useEffect(()=>{x(i=>({...i,image:t}));},[t]),v.useEffect(()=>{t||p();},[t,p]);let M=()=>React.createElement("input",{...l,className:chunkBKBCWEET_js.a("hidden",l.className),ref:L,type:"file",onInput:y,accept:"image/*","aria-labelledby":"image-upload-input"});return N?React.createElement("label",{id:"image-upload-input",htmlFor:"file-input",className:"border-input bg-background ring-primary ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring relative flex h-10 w-full cursor-pointer rounded-md border border-dashed px-3 py-2 text-sm ring-offset-2 outline-hidden transition-all file:border-0 file:bg-transparent file:text-sm file:font-medium focus:ring-2 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-hidden disabled:cursor-not-allowed disabled:opacity-50"},React.createElement("input",{...l,id:"file-input",className:chunkBKBCWEET_js.a("hidden",l.className),ref:L,type:"file",onInput:y,accept:"image/*","aria-labelledby":"image-upload-input"}),React.createElement("div",{className:"flex items-center space-x-4"},React.createElement("div",{className:"flex"},React.createElement(chunkEKW5ROZ4_js.a,{condition:!a.image},React.createElement(lucideReact.UploadCloud,{className:"text-muted-foreground h-5"})),React.createElement(chunkEKW5ROZ4_js.a,{condition:a.image},React.createElement(z__default.default,{loading:"lazy",style:{width:I,height:I},className:"object-contain",width:I,height:I,src:a.image??"",alt:l.alt??""}))),React.createElement(chunkEKW5ROZ4_js.a,{condition:!a.image},React.createElement("div",{className:"flex flex-auto"},React.createElement(d,{className:"cursor-pointer text-xs"},o))),React.createElement(chunkEKW5ROZ4_js.a,{condition:a.image},React.createElement("div",{className:"flex flex-auto"},React.createElement(chunkEKW5ROZ4_js.a,{condition:a.fileName,fallback:React.createElement(d,{className:"cursor-pointer truncate text-xs"},o)},React.createElement(d,{className:"truncate text-xs"},a.fileName)))),React.createElement(chunkEKW5ROZ4_js.a,{condition:a.image},React.createElement(chunkEVOK3DU6_js.b,{size:"icon",className:"h-5! w-5!",onClick:w},React.createElement(lucideReact.X,{className:"h-4"}))))):React.createElement(M,null)};function se(e){let[o,t]=v.useState(e.value),{setValue:r,register:m}=reactHookForm.useForm({defaultValues:{value:e.value},mode:"onChange",reValidateMode:"onChange"}),c=m("value"),u=v.useCallback(()=>{e.onValueChange(null),r("value",null),t("");},[e,r]),N=v.useCallback(({image:s,file:a})=>{e.onValueChange(a),t(s);},[e]),l=()=>React.createElement(V,{...c,accept:"image/*",className:"absolute h-full w-full",visible:false,multiple:false,onValueChange:N});return v.useEffect(()=>{t(e.value);},[e.value]),o?React.createElement("div",{className:"flex items-center space-x-4"},React.createElement("label",{htmlFor:"image-upload",className:"animate-in fade-in zoom-in-50 relative h-20 w-20"},React.createElement("img",{alt:e.alt??"",className:"h-full w-full rounded-full object-cover",src:e.url}),React.createElement(l,null)),React.createElement("div",null,React.createElement(chunkEVOK3DU6_js.b,{onClick:u,size:"sm",variant:"ghost"},React.createElement(chunkSA4EMREX_js.a,{i18nKey:"common:clear"})))):React.createElement(G,{descriptionSection:e.children},React.createElement(l,null))}function G(e){return React.createElement("div",{className:"flex items-center space-x-4"},React.createElement("label",{htmlFor:"image-upload",className:"border-border animate-in fade-in zoom-in-50 hover:border-primary relative flex h-20 w-20 cursor-pointer flex-col items-center justify-center rounded-full border"},React.createElement(lucideReact.Image,{className:"text-primary h-8"}),e.children),e.descriptionSection)}exports.ImageUploader=se;//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map