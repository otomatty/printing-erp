import {a as a$2}from'../chunk-PTN5UF3Z.mjs';import {a as a$1}from'../chunk-J7FZNYFX.mjs';import {b}from'../chunk-MHM5A7PG.mjs';import'../chunk-PUBMDLHF.mjs';import {a}from'../chunk-T5NLFGFR.mjs';import'../chunk-JX3OK2JC.mjs';import*as v from'react';import {useState,useCallback,useEffect,useRef}from'react';import {Image,UploadCloud,X}from'lucide-react';import {useForm}from'react-hook-form';import z from'next/image';import*as R from'@radix-ui/react-label';import {cva}from'class-variance-authority';var T=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=v.forwardRef(({className:e,...o},t)=>v.createElement(R.Root,{ref:t,className:a(T(),e),...o}));d.displayName=R.Root.displayName;var I=22,V=function({children:o,image:t,onClear:r,onInput:m,onValueChange:c,ref:u,visible:N=true,...l}){let s=useRef(null),[a$1,x]=useState({image:t,fileName:""}),y=useCallback(i=>{i.preventDefault();let C=i.currentTarget.files;if(C?.length){let g=C[0];if(!g)return;let E=URL.createObjectURL(g);x({image:E,fileName:g.name}),c&&c({image:E,file:g});}m&&m(i);},[m,c]),p=useCallback(()=>{x({image:"",fileName:""}),s.current&&(s.current.value=""),r&&r();},[r]),w=useCallback(i=>{i.preventDefault(),p();},[p]),L=useCallback(i=>{s.current=i,typeof u=="function"&&u(s.current);},[u]);useEffect(()=>{x(i=>({...i,image:t}));},[t]),useEffect(()=>{t||p();},[t,p]);let M=()=>React.createElement("input",{...l,className:a("hidden",l.className),ref:L,type:"file",onInput:y,accept:"image/*","aria-labelledby":"image-upload-input"});return N?React.createElement("label",{id:"image-upload-input",htmlFor:"file-input",className:"border-input bg-background ring-primary ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring relative flex h-10 w-full cursor-pointer rounded-md border border-dashed px-3 py-2 text-sm ring-offset-2 outline-hidden transition-all file:border-0 file:bg-transparent file:text-sm file:font-medium focus:ring-2 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-hidden disabled:cursor-not-allowed disabled:opacity-50"},React.createElement("input",{...l,id:"file-input",className:a("hidden",l.className),ref:L,type:"file",onInput:y,accept:"image/*","aria-labelledby":"image-upload-input"}),React.createElement("div",{className:"flex items-center space-x-4"},React.createElement("div",{className:"flex"},React.createElement(a$2,{condition:!a$1.image},React.createElement(UploadCloud,{className:"text-muted-foreground h-5"})),React.createElement(a$2,{condition:a$1.image},React.createElement(z,{loading:"lazy",style:{width:I,height:I},className:"object-contain",width:I,height:I,src:a$1.image??"",alt:l.alt??""}))),React.createElement(a$2,{condition:!a$1.image},React.createElement("div",{className:"flex flex-auto"},React.createElement(d,{className:"cursor-pointer text-xs"},o))),React.createElement(a$2,{condition:a$1.image},React.createElement("div",{className:"flex flex-auto"},React.createElement(a$2,{condition:a$1.fileName,fallback:React.createElement(d,{className:"cursor-pointer truncate text-xs"},o)},React.createElement(d,{className:"truncate text-xs"},a$1.fileName)))),React.createElement(a$2,{condition:a$1.image},React.createElement(b,{size:"icon",className:"h-5! w-5!",onClick:w},React.createElement(X,{className:"h-4"}))))):React.createElement(M,null)};function se(e){let[o,t]=useState(e.value),{setValue:r,register:m}=useForm({defaultValues:{value:e.value},mode:"onChange",reValidateMode:"onChange"}),c=m("value"),u=useCallback(()=>{e.onValueChange(null),r("value",null),t("");},[e,r]),N=useCallback(({image:s,file:a})=>{e.onValueChange(a),t(s);},[e]),l=()=>React.createElement(V,{...c,accept:"image/*",className:"absolute h-full w-full",visible:false,multiple:false,onValueChange:N});return useEffect(()=>{t(e.value);},[e.value]),o?React.createElement("div",{className:"flex items-center space-x-4"},React.createElement("label",{htmlFor:"image-upload",className:"animate-in fade-in zoom-in-50 relative h-20 w-20"},React.createElement("img",{alt:e.alt??"",className:"h-full w-full rounded-full object-cover",src:e.url}),React.createElement(l,null)),React.createElement("div",null,React.createElement(b,{onClick:u,size:"sm",variant:"ghost"},React.createElement(a$1,{i18nKey:"common:clear"})))):React.createElement(G,{descriptionSection:e.children},React.createElement(l,null))}function G(e){return React.createElement("div",{className:"flex items-center space-x-4"},React.createElement("label",{htmlFor:"image-upload",className:"border-border animate-in fade-in zoom-in-50 hover:border-primary relative flex h-20 w-20 cursor-pointer flex-col items-center justify-center rounded-full border"},React.createElement(Image,{className:"text-primary h-8"}),e.children),e.descriptionSection)}export{se as ImageUploader};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map