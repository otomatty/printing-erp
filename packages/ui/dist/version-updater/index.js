'use strict';var chunkVBG7OCWJ_js=require('../chunk-VBG7OCWJ.js'),chunkSA4EMREX_js=require('../chunk-SA4EMREX.js'),chunkEVOK3DU6_js=require('../chunk-EVOK3DU6.js'),chunkBKBCWEET_js=require('../chunk-BKBCWEET.js');require('../chunk-HYHNM5M6.js');var a=require('react'),lucideReact=require('lucide-react'),e=require('@radix-ui/react-alert-dialog');function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}});}})}n.default=e;return Object.freeze(n)}var a__namespace=/*#__PURE__*/_interopNamespace(a);var e__namespace=/*#__PURE__*/_interopNamespace(e);var R=e__namespace.Root;var C=e__namespace.Portal,y=a__namespace.forwardRef(({className:i,...t},o)=>a__namespace.createElement(e__namespace.Overlay,{className:chunkBKBCWEET_js.a("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...t,ref:o}));y.displayName=e__namespace.Overlay.displayName;var p=a__namespace.forwardRef(({className:i,...t},o)=>a__namespace.createElement(C,null,a__namespace.createElement(y,null),a__namespace.createElement(e__namespace.Content,{ref:o,className:chunkBKBCWEET_js.a("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",i),...t})));p.displayName=e__namespace.Content.displayName;var g=({className:i,...t})=>a__namespace.createElement("div",{className:chunkBKBCWEET_js.a("flex flex-col space-y-2 text-center sm:text-left",i),...t});g.displayName="AlertDialogHeader";var f=({className:i,...t})=>a__namespace.createElement("div",{className:chunkBKBCWEET_js.a("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",i),...t});f.displayName="AlertDialogFooter";var D=a__namespace.forwardRef(({className:i,...t},o)=>a__namespace.createElement(e__namespace.Title,{ref:o,className:chunkBKBCWEET_js.a("text-lg font-semibold",i),...t}));D.displayName=e__namespace.Title.displayName;var A=a__namespace.forwardRef(({className:i,...t},o)=>a__namespace.createElement(e__namespace.Description,{ref:o,className:chunkBKBCWEET_js.a("text-sm text-muted-foreground",i),...t}));A.displayName=e__namespace.Description.displayName;var E=a__namespace.forwardRef(({className:i,...t},o)=>a__namespace.createElement(e__namespace.Action,{ref:o,className:chunkBKBCWEET_js.a(chunkEVOK3DU6_js.a(),i),...t}));E.displayName=e__namespace.Action.displayName;var h=a__namespace.forwardRef(({className:i,...t},o)=>a__namespace.createElement(e__namespace.Cancel,{ref:o,className:chunkBKBCWEET_js.a(chunkEVOK3DU6_js.a({variant:"outline"}),"mt-2 sm:mt-0",i),...t}));h.displayName=e__namespace.Cancel.displayName;var T=null,H=120,N=process.env.NEXT_PUBLIC_VERSION_UPDATER_REFETCH_INTERVAL_SECONDS;function U(i){let{data:t}=b(i),[o,s]=a.useState(false),[u,r]=a.useState(false);return a.useEffect(()=>{r(t?.didChange??false);},[t?.didChange]),!t?.didChange||o?null:React.createElement(R,{open:u,onOpenChange:r},React.createElement(p,null,React.createElement(g,null,React.createElement(D,{className:"flex items-center gap-x-2"},React.createElement(lucideReact.RocketIcon,{className:"h-4"}),React.createElement("span",null,React.createElement(chunkSA4EMREX_js.a,{i18nKey:"common:newVersionAvailable"}))),React.createElement(A,null,React.createElement(chunkSA4EMREX_js.a,{i18nKey:"common:newVersionAvailableDescription"}))),React.createElement(f,null,React.createElement(chunkEVOK3DU6_js.b,{variant:"outline",onClick:()=>{r(false),s(true);}},React.createElement(chunkSA4EMREX_js.a,{i18nKey:"common:back"})),React.createElement(chunkEVOK3DU6_js.b,{onClick:()=>window.location.reload()},React.createElement(chunkSA4EMREX_js.a,{i18nKey:"common:newVersionSubmitButton"})))))}function b(i={}){let t=N?Number(N):H,o=(i.intervalTimeInSecond??t)*1e3,s=o/2;return chunkVBG7OCWJ_js.a({queryKey:["version-updater"],staleTime:s,gcTime:o,refetchIntervalInBackground:true,refetchInterval:o,initialData:null,queryFn:async()=>{let r=await(await fetch("/version")).text(),m=T;return T=r,{currentVersion:r,oldVersion:m,didChange:m!==null&&r!==m}}})}exports.VersionUpdater=U;//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map