import {a as a$4}from'../chunk-4K7VYNPB.mjs';import {a as a$3}from'../chunk-J7FZNYFX.mjs';import {a as a$2,b as b$1}from'../chunk-MHM5A7PG.mjs';import {a as a$1}from'../chunk-T5NLFGFR.mjs';import'../chunk-JX3OK2JC.mjs';import*as a from'react';import {useState,useEffect}from'react';import {RocketIcon}from'lucide-react';import*as e from'@radix-ui/react-alert-dialog';var R=e.Root;var C=e.Portal,y=a.forwardRef(({className:i,...t},o)=>a.createElement(e.Overlay,{className:a$1("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...t,ref:o}));y.displayName=e.Overlay.displayName;var p=a.forwardRef(({className:i,...t},o)=>a.createElement(C,null,a.createElement(y,null),a.createElement(e.Content,{ref:o,className:a$1("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",i),...t})));p.displayName=e.Content.displayName;var g=({className:i,...t})=>a.createElement("div",{className:a$1("flex flex-col space-y-2 text-center sm:text-left",i),...t});g.displayName="AlertDialogHeader";var f=({className:i,...t})=>a.createElement("div",{className:a$1("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",i),...t});f.displayName="AlertDialogFooter";var D=a.forwardRef(({className:i,...t},o)=>a.createElement(e.Title,{ref:o,className:a$1("text-lg font-semibold",i),...t}));D.displayName=e.Title.displayName;var A=a.forwardRef(({className:i,...t},o)=>a.createElement(e.Description,{ref:o,className:a$1("text-sm text-muted-foreground",i),...t}));A.displayName=e.Description.displayName;var E=a.forwardRef(({className:i,...t},o)=>a.createElement(e.Action,{ref:o,className:a$1(a$2(),i),...t}));E.displayName=e.Action.displayName;var h=a.forwardRef(({className:i,...t},o)=>a.createElement(e.Cancel,{ref:o,className:a$1(a$2({variant:"outline"}),"mt-2 sm:mt-0",i),...t}));h.displayName=e.Cancel.displayName;var T=null,H=120,N=process.env.NEXT_PUBLIC_VERSION_UPDATER_REFETCH_INTERVAL_SECONDS;function U(i){let{data:t}=b(i),[o,s]=useState(false),[u,r]=useState(false);return useEffect(()=>{r(t?.didChange??false);},[t?.didChange]),!t?.didChange||o?null:React.createElement(R,{open:u,onOpenChange:r},React.createElement(p,null,React.createElement(g,null,React.createElement(D,{className:"flex items-center gap-x-2"},React.createElement(RocketIcon,{className:"h-4"}),React.createElement("span",null,React.createElement(a$3,{i18nKey:"common:newVersionAvailable"}))),React.createElement(A,null,React.createElement(a$3,{i18nKey:"common:newVersionAvailableDescription"}))),React.createElement(f,null,React.createElement(b$1,{variant:"outline",onClick:()=>{r(false),s(true);}},React.createElement(a$3,{i18nKey:"common:back"})),React.createElement(b$1,{onClick:()=>window.location.reload()},React.createElement(a$3,{i18nKey:"common:newVersionSubmitButton"})))))}function b(i={}){let t=N?Number(N):H,o=(i.intervalTimeInSecond??t)*1e3,s=o/2;return a$4({queryKey:["version-updater"],staleTime:s,gcTime:o,refetchIntervalInBackground:true,refetchInterval:o,initialData:null,queryFn:async()=>{let r=await(await fetch("/version")).text(),m=T;return T=r,{currentVersion:r,oldVersion:m,didChange:m!==null&&r!==m}}})}export{U as VersionUpdater};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map